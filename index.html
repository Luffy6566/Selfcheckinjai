// main.jsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

// App.jsx
import { useState } from "react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Slider } from "@/components/ui/slider";
import {
  RadarChart,
  PolarGrid,
  PolarAngleAxis,
  PolarRadiusAxis,
  Radar,
  Tooltip,
} from "recharts";

const questions = [
  {
    area: "‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô",
    prompts: [
      "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô?",
      "‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏°‡∏µ‡πÅ‡∏£‡∏á‡∏ö‡∏±‡∏ô‡∏î‡∏≤‡∏•‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°?",
    ],
  },
  {
    area: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå",
    prompts: [
      "‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ô‡∏£‡∏≠‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡πÑ‡∏´‡∏°?",
      "‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡∏ô‡∏£‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏¢‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÑ‡∏´‡∏°?",
    ],
  },
  {
    area: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß",
    prompts: [
      "‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à‡∏Å‡∏±‡∏ö‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?",
      "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?",
    ],
  },
  {
    area: "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏¢‡πÉ‡∏à",
    prompts: [
      "‡∏Ñ‡∏∏‡∏ì‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡πÑ‡∏´‡∏°?",
      "‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏°‡∏µ‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤?",
    ],
  },
];

export default function App() {
  const [step, setStep] = useState("home");
  const [responses, setResponses] = useState({});

  const handleAnswer = (area, index, value) => {
    setResponses((prev) => ({
      ...prev,
      [area]: {
        ...(prev[area] || {}),
        [index]: value[0],
      },
    }));
  };

  const calculateResults = () => {
    return questions.map(({ area }) => {
      const scores = Object.values(responses[area] || {});
      const avg = scores.length ? scores.reduce((a, b) => a + b, 0) / scores.length : 0;
      return { area, score: Math.round(avg * 10) / 10 };
    });
  };

  if (step === "home") {
    return (
      <div className="min-h-screen bg-blue-50 flex flex-col items-center justify-center text-center px-4">
        <h1 className="text-2xl font-semibold mb-4">‡∏°‡∏≤‡∏™‡∏≥‡∏£‡∏ß‡∏à‡πÉ‡∏à‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÄ‡∏ñ‡∏≠‡∏∞</h1>
        <Button onClick={() => setStep("form")}>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå</Button>
        <p className="mt-2 text-sm">‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏µ‡∏¢‡∏á 1 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
      </div>
    );
  }

  if (step === "form") {
    return (
      <div className="min-h-screen bg-blue-50 p-4 space-y-6">
        {questions.map(({ area, prompts }, i) => (
          <Card key={i} className="bg-white shadow-md rounded-2xl">
            <CardContent className="space-y-4 p-4">
              <h2 className="text-xl font-semibold text-blue-700">{area}</h2>
              {prompts.map((prompt, j) => (
                <div key={j}>
                  <p className="mb-1">{prompt}</p>
                  <div className="flex justify-between text-sm text-gray-500 px-1">
                    <span>‡∏ô‡πâ‡∏≠‡∏¢</span>
                    <span>‡∏°‡∏≤‡∏Å</span>
                  </div>
                  <Slider
                    defaultValue={[3]}
                    min={1}
                    max={5}
                    step={1}
                    onValueChange={(val) => handleAnswer(area, j, val)}
                    className="text-blue-500"
                    thumbClassName="before:content-['‚ù§Ô∏è'] before:text-pink-400 before:text-xl"
                  />
                </div>
              ))}
            </CardContent>
          </Card>
        ))}
        <Button className="w-full" onClick={() => setStep("result")}>
          ‡∏î‡∏π‡∏ú‡∏•‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
        </Button>
      </div>
    );
  }

  if (step === "result") {
    const results = calculateResults();
    const highlight = results.sort((a, b) => b.score - a.score);
    const summary = `‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏î‡∏π‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡πÉ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á "${highlight[0].area}" ‡πÅ‡∏ï‡πà‡∏î‡∏π‡∏≠‡πà‡∏≠‡∏ô‡∏•‡πâ‡∏≤‡πÉ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á "${highlight[highlight.length - 1].area}" ‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏•‡∏∂‡∏Å ‡πÜ ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ô‡∏∞ üòä`;

    return (
      <div className="min-h-screen bg-blue-100 p-4">
        <h2 className="text-xl font-bold mb-4 text-center">‡∏ú‡∏•‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
        <div className="flex justify-center">
          <RadarChart outerRadius={90} width={350} height={300} data={results}>
            <PolarGrid />
            <PolarAngleAxis dataKey="area" />
            <PolarRadiusAxis domain={[0, 5]} tickFormatter={(tick) => `${tick}`} />
            <Tooltip formatter={(value) => [`${value} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`, "‡∏£‡∏∞‡∏î‡∏±‡∏ö"]} />
            <Radar
              name="‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"
              dataKey="score"
              stroke="#3B82F6"
              fill="#3B82F6"
              fillOpacity={0.6}
            />
          </RadarChart>
        </div>
        <p className="text-center mt-4 text-lg">{summary}</p>
        <div className="flex flex-col items-center gap-2 mt-6">
          <Button onClick={() => setStep("form")}>üîÅ ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡πÉ‡∏´‡∏°‡πà</Button>
        </div>
      </div>
    );
  }
}

// index.html
<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå | JAi Mirror</title>
    <meta name="description" content="‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡πÉ‡∏à‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  </head>
  <body class="bg-blue-50 text-gray-800">
    <div id="root"></div>
    <script type="module" src="/main.jsx"></script>
  </body>
</html>

// vite.config.js
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  base: '/Selfcheckinjai/',
  plugins: [react()],
  resolve: {
    alias: {
      '@/': `${__dirname}/src/`
    }
  }
});
